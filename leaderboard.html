<head>
  <title>Beginning JavaScript</title>
</head>

<body>
  {{> loginButtons}}
  <div id="outer">
    {{> players}}
  </div>
</body>

<template name="players">
  <div class="players">
    <table border="1">
      <tr>
        <th>Computer Name</th>
        <th>Computer Secret</th>
        <th></th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>GitHub Username</th>
        <th>Grade</th>
        <th>Favorite Subjects</th>
        <th>Favorite Color</th>        
        <th>Avatar URL</th>
        <th>Avatar</th>
      </tr>      
      {{#each players}}
        {{> player}}
      {{/each}}
    </table>
  </div>

  {{#if selectedName}}
  <div class="details">
    <div class="name">{{selectedName}}</div>
    <input type="button" class="inc" value="Give 5 points" />
  </div>
  {{else}}
  <div class="none">Click a player to select</div>
  {{/if}}
</template>

<template name="player">
  <tr class="player {{selected}}" style="background-color: {{favoriteColor}}" valign="{{getVAlign computerName}}">
    <td class="name" style="background-color: white"><span id="{{_id}}computerName">{{computerName}}</span></td>
    <td class="name"><input class='entry' type='password' id='{{_id}}computerSecret' value="{{computerSecret}}" /></td>    
    {{#if seatUnlocked computerName}}
      <td class="name"><input type="button" class="seatUnlock seatUnlocked" value="Unlocked!" /></td>
      <td class="name"><input class='entry' type='text' data-field="firstName" value="{{firstName}}" /></td>
      <td class="name"><input class='entry' type='text' data-field="lastName" value="{{lastName}}" /></td> 
      <td class="name"><input class='entry' type='text' data-field="gitHubUsername" value="{{gitHubUsername}}" /></td> 
      <td class="name"><input class='entry' type='number' data-field="grade" value="{{grade}}" /></td>
      <td class="name" id="{{_id}}favoriteSubjects">
        {{#each withIndex favoriteSubjects 1}}
          {{> favoriteSubject}}
        {{/each}}
      </td>
      <td class="name"><input class='favoriteColor' type='color' data-field="favoriteColor" value="{{favoriteColor}}" /></td>
      <td class="name"><input class='entry' data-id="{{_id}}" type='text' data-field="avatarURL" value="{{avatarURL}}" /></td>
      <td class="name"><img src='{{avatarURL}}' height='48' width='48' /></td>
    {{else}}
      <td class="name"><input type="button" data-id="{{_id}}" class="seatUnlock" value="Unlock Seat" /></td>    
      <td class="name">{{firstName}}</td>
      <td class="name">{{lastName}}</td> 
      <td class="name">{{gitHubUsername}}</td> 
      <td class="name">{{grade}}</td>
      <td class="name favoriteSubjects">
        {{#each excludeWhenMatch favoriteSubjects "?"}}
          {{> favoriteSubjectView}}
        {{/each}}
      </td>
      <td class="name">{{favoriteColor}}</td>
      <td class="name">&nbsp;</td>      
      <td class="name"><img src="{{avatarURL}}" height='48' width='48' /></td>
    {{/if}}
  </tr>
</template>

<template name="favoriteSubject">
  &nbsp;<strong>#{{this.indexDisplay}}</strong> <input class='entry favoriteSubject' type='text' value="{{this.val}}" data-id='{{../_id}}' data-index="{{this.index}}" /><br />
</template>

<template name="favoriteSubjectView">
  &nbsp;<strong>#{{this.indexDisplay}}</strong> {{this.val}}<br />
</template>
